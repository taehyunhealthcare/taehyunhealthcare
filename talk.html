<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Q&A - 태현헬스케어 | 고객문의 게시판</title>

    <link rel="canonical" href="https://thhealthcare.co.kr/talk.html">

    <!-- css,js 연결 코드 -->
    <link rel="stylesheet" href="css/style.css">
    <script src="js/jquery-1.12.4.min.js"></script>
    <script src="js/common.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- 시작 -->
    <div id="wrap">
        <div class="chat">
            <div class="chat1">
                <li><a href="./">홈케어 전문회사 <span> 태현헬스케어</span></a></li>
            </div>
        </div>
    </div>
    <!-- 끝 -->

    <!-- 헤더 시작 -->
    <header>
    <div class="logo-wrapper">
        <img class="logo" src="img/logo.png" alt="LOGO" />
    </div>
    </header>

    <!-- 헤더 끝 -->

    <!-- 메뉴 시작 -->
    <nav class="menu-pc">
        <div class="menu-bg"></div>
        <ul class="menu">
            <li>
                <a href="#">회사소개</a>
                <ul class="submenu">
                    <li><a href="about.html">회사소개</a></li>
                    <li><a href="03_about.html">오시는길</a></li>
                </ul>
            </li>
            <li>
                <a href="#">제품소개</a>
                <ul class="submenu">
                    <li><a href="01_products.html">Fetal Doppler</a></li>
                    <li><a href="02_products.html">Nebulizer</a></li>
                    <li><a href="03_products.html">Pulse Oximeter</a></li>
                </ul>
            </li>
            <li>
                <a href="partnership.html">B2B</a>
            </li>
            <li>
                <a href="#">COMMUNITY</a>
                <ul class="submenu">
                    <li><a href="talk.html">Q&A</a></li>
                    <li><a href="memo.html">자료실</a></li>
                    <li><a href="notice.html">공지사항</a></li>
                </ul>
            </li>
        </ul>
    </nav>
    <!-- 메뉴 끝 -->
    
    <!-- content 시작 -->
      <div class="n_contents">
        <div class="qna-header">
          <h2>Q&A</h2>
          <span class="m_span"><a href="talk_1.html">글쓰기</a></span>
      </div>
          <table class="board">
            <colgroup>
              <col style="width: 10%;" />  <!-- 글번호 -->
              <col style="width: 50%;" />  <!-- 제목 -->
              <col style="width: 20%;" />  <!-- 날짜 -->
              <col style="width: 20%;" />  <!-- 작성자 -->
            </colgroup>
            <thead>
              <tr>
                <th>번호</th>
                <th>제목</th>
                <th>날짜</th>
                <th>작성자</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
          <div class="content-wrapper"><!-- 페이지 번호 nav 삽입됨 --></div>
      </div>
      <div class="pagination-container">
        <div class="pagination"></div>
      </div>
    <!-- content 끝  -->

    <!-- 푸터 시작 -->
    <footer>
        <div class="footer_inner">   
            <div class="footer_nav">
                <div class="nav_col">
                    <h3>태현헬스케어</h3>
                    <ul>
                        <li><a href="about.html">회사 소개</a></li>
                        <li><a href="#">제품 소개</a></li>
                        <li><a href="partnership.html">B2B</a></li>
                    </ul>
                </div>
                <div class="nav_col">
                    <h3>고객지원</h3>
                    <ul>
                        <li><a href="notice.html">공지사항</a></li>
                        <li><a href="memo.html">자료실</a></li>
                        <li><a href="talk.html">Q&A</a></li>
                    </ul>
                </div>
            </div>
            <div class="flogo_info">
                <div class="flogo">
                    <a href="#" class="logo-link"><img src="img/flogo.png" alt="태현헬스케어 로고"></a>
                    <div class="social_links">
                        <a href="https://www.instagram.com/accumedi_/">
                            <img src="img/insta.png" alt="인스타그램">
                            <p>INSTAGRAM</p>
                        </a>
                    </div>
                </div> 
            </div>
            <div class="footer_contact">
                <p>
                    대표번호: <span class="n">062-233-6015</span> (평일 09:00 ~ 17:00 / 점심시간: 12:00 ~ 13:00) <br>
                    이메일: taehyunhealthcare@naver.com <br>
                    주소: 광주광역시 동구 천변우로 453 (코밀빌딩) 4층 413호 <br>
                    사업자등록번호: 139-86-02746 
                </p>
                <div class="policy_links">
                    <a href="#" id="openModalBtn">개인정보처리방침</a>
                </div>
            </div>
        </div>
        <div class="footer_copyright">
            &copy; 2025 태현헬스케어. All rights reserved.
        </div>
    </footer>
    <!-- 푸터 끝 -->

    <!-- 모달창 시작 -->
    <div id="privacyModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>&lt;태현헬스케어&gt; 개인정보 처리방침</h2>
        <div class="modal-body">
        <p>
          태현헬스케어 (이하 "회사") 는 이용자의 개인정보를 중요하게 생각하며, 『 개인정보 보호법 』을 준수하고 있습니다. <br>
          본 개인정보 처리방침은 회사가 운영하는 홈페이지를 통해 수집하는 개인정보 및 처리방침을 안내하기 위하여 마련되었습니다. <br><br>

          1. 수집하는 개인정보 항목 <br>
          회사는 아래와 같은 항목을 수집할 수 있습니다. <br>
          - 문의하기 및 B2B 제휴문의 시: 이름, 이메일, 문의 내용 <br>
          - 서비스 이용과정에서 자동으로 생성되는 정보: 접속 IP, 쿠키, 방문 기록, 브라우저 정보 등 <br><br>

          2. 개인정보의 수집 및 이용 목적 <br>
          회사는 수집한 개인정보를 다음의 목적을 위해 사용합니다. <br>
          - 이용자 문의 응대 및 답변 처리 <br>
          - 제품/서비스 제안 및 파트너십 응대 <br>
          - 홈페이지 운영의 통계 분석 (Google Analytics 등) <br><br>

          3. 개인정보 보유 및 이용 기간 <br>
          회사는 개인정보 수집 및 이용 목적이 달성된 후에는 해당 정보를 지체 없이 파기합니다. <br>
          단, 관련 법령에 따라 일정 기간 보관이 필요한 경우는 해당 기간 동안 보관합니다. <br>
          - 소비자 불만 또는 분쟁처리에 관한 기록: 3년 (전자상거래법) <br><br>

          4. 개인정보의 제3자 제공 <br>
          회사는 이용자의 개인정보를 원칙적으로 외부에 제공하지 않습니다. <br>
          다만, 아래의 경우에는 예외로 합니다. <br>
          - 이용자가 사전에 동의한 경우 <br>
          - 법령에 의거하거나 수사기관의 요청이 있는 경우 <br><br>

          5. 개인정보의 처리 위탁 <br>
          회사는 서비스 향상을 위해 아래와 같이 개인정보 처리를 위탁할 수 있습니다. <br>
          - Google Analytics (웹사이트 방문 분석) <br>
          - Naver Search Advisor (사이트 통계) <br><br>

          6. 쿠키의 설치/운영 및 거부 <br>
          회사는 쿠키를 통해 이용자의 방문 기록을 분석합니다. 이용자는 웹 브라우저의 설정을 통해 쿠키 저장을 거부할 수 있습니다. <br><br>

          7. 이용자의 권리 <br>
          이용자는 언제든지 자신의 개인정보 열람, 정정, 삭제를 요청할 수 있습니다. 개인정보 관련 문의는 아래 이메일로 연락해 주시기 바랍니다. <br><br>

          8. 개인정보 보호책임자 <br>
          - 성명: [관리자 이름] <br>
          - 연락처: [이메일 주소] <br>
          - 담당부서: [부서명] <br><br>

          9. 개인정보처리방침의 변경 <br>
          이 개인정보처리방침은 법령 또는 회사 정책에 따라 변경될 수 있으며, 변경 시 홈페이지를 통해 공지합니다. <br><br>

          - 시행일자: 2025년 7월 23일 - 
        </p>
        </div>
    </div>
    </div>
    <!-- 모달창 끝 -->

    <!-- QnA 문의 리스트 출력 및 삭제 + 페이지 처리 스크립트 -->
    <script>
    document.addEventListener("DOMContentLoaded", function(){
      const isAdmin = localStorage.getItem('isAdmin') === 'true';
      let allPosts = JSON.parse(localStorage.getItem('posts') || '[]');

      allPosts = allPosts.map(post => {
        if (!post.type) post.type = 'talk';
        return post;
      });
      localStorage.setItem('posts', JSON.stringify(allPosts));

      allPosts.reverse();
      let posts = allPosts.filter(p => p.type === 'talk');
      posts.forEach((post,i) => {
        if (post.id == null) post.id = i;
      });

      const tbody = document.querySelector('table.board tbody');
      const nav = document.querySelector('.pagination');
      const pageSize = 7, pagesToShow = 4;
      let currentPage = 1, groupStart = 1;

      function refreshPosts() {
        const cur = JSON.parse(localStorage.getItem('posts')||'[]').reverse();
        posts = cur.filter(p => p.type === 'talk');
      }

      function getTotalPages() {
        return Math.ceil(posts.length / pageSize) || 1;
      }

      function renderPosts(page=1) {
        refreshPosts();
        currentPage = page;
        const totalPages = getTotalPages();
        if (currentPage > totalPages) currentPage = totalPages;
        if (groupStart > totalPages) groupStart = Math.max(1, totalPages - pagesToShow + 1);

        const startIdx = (currentPage -1)*pageSize;
        const slice = posts.slice(startIdx, startIdx + pageSize);
        tbody.innerHTML = '';

        slice.forEach((post, idx) => {
          const number = startIdx + idx + 1;
          let formatted = post.date;
          if (formatted.includes('.')) {
            const [y,m,d] = formatted.split('.');
            formatted = `${y.trim()}-${m.trim().padStart(2,'0')}-${d.trim().padStart(2,'0')}`;
          }

          //  자물쇠 아이콘 또는 제목 설정
          const displayTitle = post.visibility === 'private'
            ? '<i class="fas fa-lock" title="비공개 글" style="color: #555;"></i>'
            : post.title;

          const tr = document.createElement('tr');
          tr.style.position = 'relative';
          const link = document.createElement('a');
          link.href = `view.html?id=${post.id}`;
          link.innerHTML = displayTitle;
          link.onclick = (e) => {
            if (post.visibility==='private' && !isAdmin) {
              e.preventDefault();
              showCredentialModal(post);
            }
          };
          tr.innerHTML = `<td>${number}</td><td></td><td>${formatted}</td><td>${post.maskedName || post.author || '익명'}</td>`;
          tr.querySelector('td:nth-child(2)').appendChild(link);

          if (isAdmin) {
            const btn = document.createElement('button');
            btn.textContent = '삭제';
            btn.style.cssText = 'position:absolute; right:-80px; top:50%; transform:translateY(-50%); padding:0 10px; background:#eee; border:1px solid #aaa; cursor:pointer;';
            btn.onclick = () => {
              if (confirm('삭제하시겠습니까?')) {
                const original = JSON.parse(localStorage.getItem('posts') || '[]');
                const updated = original.filter(p => !(p.type === 'talk' && p.id === post.id));
                localStorage.setItem('posts', JSON.stringify(updated));
                renderPosts(currentPage);
              }
            };
            tr.appendChild(btn);
          }

          tbody.appendChild(tr);
        });

        renderPagination();
      }

      function renderPagination() {
        const totalPages = getTotalPages();
        nav.innerHTML = '';
        if (groupStart > 1) {
          const prev = document.createElement('button');
          prev.textContent = '◀';
          prev.classList.add('nav-group');
          prev.onclick = () => { groupStart = Math.max(1, groupStart - pagesToShow); renderPosts(groupStart); };
          nav.appendChild(prev);
        }
        const end = Math.min(groupStart + pagesToShow -1, totalPages);
        for (let i=groupStart; i<=end; i++) {
          const btn = document.createElement('button');
          btn.textContent = i;
          if (i === currentPage) btn.classList.add('active');
          btn.onclick = () => renderPosts(i);
          nav.appendChild(btn);
        }
        if (end < totalPages) {
          const nxt = document.createElement('button');
          nxt.textContent = '▶';
          nxt.classList.add('nav-group');
          nxt.onclick = () => { groupStart += pagesToShow; renderPosts(groupStart); };
          nav.appendChild(nxt);
        }
      }

      function showCredentialModal(post) {
        const modal = document.createElement('div');
        Object.assign(modal.style, { position:'fixed',top:0,left:0,width:'100%',height:'100%',background:'rgba(0,0,0,0.5)', display:'flex',alignItems:'center',justifyContent:'center',zIndex:9999 });
        modal.innerHTML = `
          <div class="lock-box" style="background:#fff;padding:30px;border-radius:10px;max-width:400px">
            <h3 class = "lock" >비공개 글입니다</h3>
            <input id="modalName" placeholder="이름" style="width:100%;margin-bottom:10px;margin-top:10px;border:1px solid #ccc;padding:10px;">
            <input id="modalEmail" placeholder="이메일" style="width:100%;margin-bottom:20px;border:1px solid #ccc;padding:10px;">
            <div style="text-align: center;">
            <button id="confirmBtn" style="background:#2a8;color:#fff;cursor:pointer; padding: 0 15px;">확인</button>
            <button id="cancelBtn" style="margin-left:10px;cursor:pointer; padding: 0 15px;">취소</button>
            </div>
          </div>`;
        document.body.appendChild(modal);
        modal.querySelector('#cancelBtn').onclick = () => document.body.removeChild(modal);
        modal.querySelector('#confirmBtn').onclick = () => {
          const n=modal.querySelector('#modalName').value.trim();
          const e=modal.querySelector('#modalEmail').value.trim();
          if (n===post.name && e===post.email) {
            window.location.href = `view.html?id=${post.id}`;
          } else alert('정보가 일치하지 않습니다.');
        };
      }

      renderPosts(1);
    });
    </script>

    <!-- 모달 통합 스크립트 -->
    <script>
    document.addEventListener("DOMContentLoaded", function () {
    /** ========== 개인정보 모달 관련 ========== **/
    const modal = document.getElementById("privacyModal");
    const openBtn = document.getElementById("openModalBtn");
    const closeBtn = document.querySelector(".close");

    if (modal && openBtn && closeBtn) {
        // 모달 열기
        openBtn.onclick = function (e) {
        e.preventDefault();
        modal.style.display = "block";
        modal.scrollTop = 0; // 스크롤 초기화
        document.body.classList.add("modal-open");
        };

        // 모달 닫기
        closeBtn.onclick = function () {
        modal.style.display = "none";
        document.body.classList.remove("modal-open");
        };

        // 바깥 클릭 시 닫기
        window.onclick = function (event) {
        if (event.target === modal) {
            modal.style.display = "none";
            document.body.classList.remove("modal-open");
        }
        };

        // 드래그/복사/우클릭 방지
        modal.addEventListener("dragstart", e => e.preventDefault());
        modal.addEventListener("copy", e => e.preventDefault());
        modal.addEventListener("contextmenu", e => e.preventDefault());
    }
    });
    </script>
</body>
</html>
